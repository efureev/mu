{"version":3,"file":"sortObjectsInArrayByProperty.js","names":["sortByProperty","isArray","isObject","isString","select","clone","pathToObject","sortObjectsInArrayByProperty","obj","property","asc","ignoreCase","Error","sort","includes","cloneObj","keys","split","sortKey","pop","aPath","join","a","aSorted","sortDescObjectsInArrayByProperty"],"sources":["../../../src/sort/sortObjectsInArrayByProperty.ts"],"sourcesContent":["import sortByProperty from './sortByProperty'\nimport { isArray, isObject, isString } from '../is'\nimport select from '../object/select'\nimport clone from '../core/clone'\nimport pathToObject from '../object/pathToObject'\n\n/**\n * Sort object-like items into array\n *\n * @param {object|array} obj\n * @param {string} property\n * @param {boolean} asc\n * @param {boolean} ignoreCase\n * @return {(function(*, *): number)|*}\n *\n * @example 1 array-sorting with digit keys\n *  const items = [\n *       { id: 2, title: '...', pId: 62 },\n *       { id: 1, title: '...', pId: 43 }\n *  ]\n *  sortObjectsInArrayByProperty(items, `id`)\n *  sortObjectsInArrayByProperty(items, `pId`, false) // is equal `sortDescObjectsInArrayByProperty(items, `pId`)`\n *  sortObjectsInArrayByProperty(items, `pId`, false, false) is equal `sortDescObjectsInArrayByProperty(items, `pId`, false)`\n *\n * @example 2: array-sorting with string keys\n *  const items = [\n *      { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Mo/symbols.git' },\n *      { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Zoo.git' },\n *  ]\n *  sortObjectsInArrayByProperty(items, `url`)\n *\n * @example 3: object-like-sorting with string keys\n *  const items = {\n *    name: 'list',\n *    sub1: {\n *       sub2: {\n *        sub3: {\n *          repositories: [\n *            { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Mo/symbols.git' },\n *            { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Zoo.git' },\n *          ]\n *        }\n *      }\n *    }\n *  };\n *\n *  sortObjectsInArrayByProperty(items, `sub1.sub2.sub3.repositories.url`)\n *\n */\nexport default function sortObjectsInArrayByProperty(\n  obj: Record<PropertyKey, any>,\n  property: string,\n  asc: boolean = true,\n  ignoreCase: boolean = true\n): Record<PropertyKey, any> {\n  if (!isString(property)) {\n    throw new Error(`key should be a String`)\n  }\n\n  if (isArray(obj)) {\n    return obj.sort(sortByProperty(property, asc, ignoreCase))\n  }\n\n  if (!isObject(obj)) {\n    throw new Error(`obj should be an Object or an Array`)\n  }\n\n  if (!property.includes('.')) {\n    throw new Error(`key's path should divided by dot (.): key1.inner-key.localKey`)\n  }\n\n  const cloneObj = clone(obj)\n\n  const keys: string[] = property.split(`.`)\n  const sortKey = keys.pop()\n  if (!sortKey) {\n    throw new Error(`Not found a key`)\n  }\n\n  const aPath = keys.join(`.`)\n  const a = select(cloneObj, aPath)\n\n  const aSorted = sortObjectsInArrayByProperty(a, sortKey, asc, ignoreCase)\n\n  return pathToObject(aPath, aSorted, cloneObj)\n}\n\nexport function sortDescObjectsInArrayByProperty(\n  obj: Record<PropertyKey, any>,\n  property: string,\n  ignoreCase: boolean = true\n) {\n  return sortObjectsInArrayByProperty(obj, property, false, ignoreCase)\n}\n"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,kBAA3B;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,4BAAT,CACbC,GADa,EAEbC,QAFa,EAGbC,GAAY,GAAG,IAHF,EAIbC,UAAmB,GAAG,IAJT,EAKa;EAC1B,IAAI,CAACR,QAAQ,CAACM,QAAD,CAAb,EAAyB;IACvB,MAAM,IAAIG,KAAJ,CAAW,wBAAX,CAAN;EACD;;EAED,IAAIX,OAAO,CAACO,GAAD,CAAX,EAAkB;IAChB,OAAOA,GAAG,CAACK,IAAJ,CAASb,cAAc,CAACS,QAAD,EAAWC,GAAX,EAAgBC,UAAhB,CAAvB,CAAP;EACD;;EAED,IAAI,CAACT,QAAQ,CAACM,GAAD,CAAb,EAAoB;IAClB,MAAM,IAAII,KAAJ,CAAW,qCAAX,CAAN;EACD;;EAED,IAAI,CAACH,QAAQ,CAACK,QAAT,CAAkB,GAAlB,CAAL,EAA6B;IAC3B,MAAM,IAAIF,KAAJ,CAAW,+DAAX,CAAN;EACD;;EAED,MAAMG,QAAQ,GAAGV,KAAK,CAACG,GAAD,CAAtB;EAEA,MAAMQ,IAAc,GAAGP,QAAQ,CAACQ,KAAT,CAAgB,GAAhB,CAAvB;EACA,MAAMC,OAAO,GAAGF,IAAI,CAACG,GAAL,EAAhB;;EACA,IAAI,CAACD,OAAL,EAAc;IACZ,MAAM,IAAIN,KAAJ,CAAW,iBAAX,CAAN;EACD;;EAED,MAAMQ,KAAK,GAAGJ,IAAI,CAACK,IAAL,CAAW,GAAX,CAAd;EACA,MAAMC,CAAC,GAAGlB,MAAM,CAACW,QAAD,EAAWK,KAAX,CAAhB;EAEA,MAAMG,OAAO,GAAGhB,4BAA4B,CAACe,CAAD,EAAIJ,OAAJ,EAAaR,GAAb,EAAkBC,UAAlB,CAA5C;EAEA,OAAOL,YAAY,CAACc,KAAD,EAAQG,OAAR,EAAiBR,QAAjB,CAAnB;AACD;AAED,OAAO,SAASS,gCAAT,CACLhB,GADK,EAELC,QAFK,EAGLE,UAAmB,GAAG,IAHjB,EAIL;EACA,OAAOJ,4BAA4B,CAACC,GAAD,EAAMC,QAAN,EAAgB,KAAhB,EAAuBE,UAAvB,CAAnC;AACD"}
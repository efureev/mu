{"version":3,"file":"forEach.js","names":["isArray","arrayEach","keys","isArrayLike","forEach","collection","iterateFn","baseEach","object","createBaseFor","func","createBaseEach","fromRight","keysFunc","index","iterable","Object","properties","length","key","eachFunc"],"sources":["../../../src/core/forEach.ts"],"sourcesContent":["import isArray from '../is/isArray'\nimport arrayEach from '../array/arrayEach'\nimport keys from './keys'\n\nimport { CollectionType } from '../internal/types'\nimport isArrayLike from '../is/isArrayLike'\n\nexport default function forEach(collection: CollectionType, iterateFn: ObjectEachCallback) {\n  if (isArray(collection)) {\n    return arrayEach(<any[]>collection, iterateFn)\n  }\n\n  const baseEach = (object: ObjType, iterateFn: ObjectEachCallback): ObjType => {\n    return object && createBaseFor()(object, iterateFn, keys)\n  }\n\n  const func = createBaseEach(baseEach)\n\n  return func(<Record<PropertyKey, any>>collection, iterateFn)\n}\n\ntype ObjType = Record<string | number, any>\ntype ObjectEachCallback = (value: any, index: PropertyKey, array: ObjType) => boolean | void\n\ntype KeysFuncType = (o: ObjType) => string[]\ntype EachFnType = (o: ObjType, eachFn: ObjectEachCallback, keysFn: KeysFuncType) => ObjType\n\nfunction createBaseFor(fromRight: boolean = false): EachFnType {\n  return function (object: ObjType, iterateFn: ObjectEachCallback, keysFunc: KeysFuncType): ObjType {\n    let index = -1,\n      iterable: ObjType = new Object(object),\n      properties = keysFunc(object),\n      length: number = properties.length,\n      key: PropertyKey\n\n    while (length--) {\n      key = properties[fromRight ? length : ++index]\n      if (iterateFn(iterable[key], key, iterable) === false) {\n        break\n      }\n    }\n\n    return object\n  }\n}\n\ntype EachFuncType = (collection: ObjType, iterateFn: ObjectEachCallback) => ObjType\n\nfunction createBaseEach(eachFunc: EachFuncType, fromRight: boolean = false) {\n  return function (collection: Record<PropertyKey, any>, iterateFn: ObjectEachCallback): ObjType {\n    if (collection == null) {\n      return collection\n    }\n\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iterateFn)\n    }\n\n    const length = collection.length\n    const iterable: ObjType = new Object(collection)\n\n    let index = fromRight ? length : -1\n\n    while (fromRight ? index-- : ++index < length) {\n      if (iterateFn(iterable[index], index, iterable) === false) {\n        break\n      }\n    }\n    return collection\n  }\n}\n"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,eAApB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAGA,OAAOC,WAAP,MAAwB,mBAAxB;AAEA,eAAe,SAASC,OAAT,CAAiBC,UAAjB,EAA6CC,SAA7C,EAA4E;EACzF,IAAIN,OAAO,CAACK,UAAD,CAAX,EAAyB;IACvB,OAAOJ,SAAS,CAAQI,UAAR,EAAoBC,SAApB,CAAhB;EACD;;EAED,MAAMC,QAAQ,GAAG,CAACC,MAAD,EAAkBF,SAAlB,KAA6D;IAC5E,OAAOE,MAAM,IAAIC,aAAa,GAAGD,MAAH,EAAWF,SAAX,EAAsBJ,IAAtB,CAA9B;EACD,CAFD;;EAIA,MAAMQ,IAAI,GAAGC,cAAc,CAACJ,QAAD,CAA3B;EAEA,OAAOG,IAAI,CAA2BL,UAA3B,EAAuCC,SAAvC,CAAX;AACD;;AAQD,SAASG,aAAT,CAAuBG,SAAkB,GAAG,KAA5C,EAA+D;EAC7D,OAAO,UAAUJ,MAAV,EAA2BF,SAA3B,EAA0DO,QAA1D,EAA2F;IAChG,IAAIC,KAAK,GAAG,CAAC,CAAb;IAAA,IACEC,QAAiB,GAAG,IAAIC,MAAJ,CAAWR,MAAX,CADtB;IAAA,IAEES,UAAU,GAAGJ,QAAQ,CAACL,MAAD,CAFvB;IAAA,IAGEU,MAAc,GAAGD,UAAU,CAACC,MAH9B;IAAA,IAIEC,GAJF;;IAMA,OAAOD,MAAM,EAAb,EAAiB;MACfC,GAAG,GAAGF,UAAU,CAACL,SAAS,GAAGM,MAAH,GAAY,EAAEJ,KAAxB,CAAhB;;MACA,IAAIR,SAAS,CAACS,QAAQ,CAACI,GAAD,CAAT,EAAgBA,GAAhB,EAAqBJ,QAArB,CAAT,KAA4C,KAAhD,EAAuD;QACrD;MACD;IACF;;IAED,OAAOP,MAAP;EACD,CAfD;AAgBD;;AAID,SAASG,cAAT,CAAwBS,QAAxB,EAAgDR,SAAkB,GAAG,KAArE,EAA4E;EAC1E,OAAO,UAAUP,UAAV,EAAgDC,SAAhD,EAAwF;IAC7F,IAAID,UAAU,IAAI,IAAlB,EAAwB;MACtB,OAAOA,UAAP;IACD;;IAED,IAAI,CAACF,WAAW,CAACE,UAAD,CAAhB,EAA8B;MAC5B,OAAOe,QAAQ,CAACf,UAAD,EAAaC,SAAb,CAAf;IACD;;IAED,MAAMY,MAAM,GAAGb,UAAU,CAACa,MAA1B;IACA,MAAMH,QAAiB,GAAG,IAAIC,MAAJ,CAAWX,UAAX,CAA1B;IAEA,IAAIS,KAAK,GAAGF,SAAS,GAAGM,MAAH,GAAY,CAAC,CAAlC;;IAEA,OAAON,SAAS,GAAGE,KAAK,EAAR,GAAa,EAAEA,KAAF,GAAUI,MAAvC,EAA+C;MAC7C,IAAIZ,SAAS,CAACS,QAAQ,CAACD,KAAD,CAAT,EAAkBA,KAAlB,EAAyBC,QAAzB,CAAT,KAAgD,KAApD,EAA2D;QACzD;MACD;IACF;;IACD,OAAOV,UAAP;EACD,CApBD;AAqBD"}
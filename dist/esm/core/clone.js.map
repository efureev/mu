{"version":3,"file":"clone.js","names":["isDate","enumerables","clone","item","cloneDom","undefined","nodeType","cloneNode","type","Object","prototype","toString","call","Date","getTime","i","j","k","Array","isArray","length","newClone","constructor","key","hasOwnProperty"],"sources":["../../../src/core/clone.ts"],"sourcesContent":["import isDate from '../is/isDate'\n\nconst enumerables = ['valueOf', 'toLocaleString', 'toString', 'constructor']\n\n/**\n * Clone simple variables including array, {}-like objects, DOM nodes and Date without\n * keeping the old reference. A reference for the object itself is returned if it's not\n * a direct descendant of Object.\n *\n * @param {Object} item The variable to clone\n * @param {Boolean} [cloneDom=true] `true` to clone DOM nodes.\n * @return {Object} clone\n */\nexport default function clone<T = NonNullable<any>>(item: T, cloneDom: boolean = true): T {\n  if (item === null || item === undefined) {\n    return item\n  }\n\n  // @ts-ignore\n  if (cloneDom && item.nodeType && item.cloneNode) {\n    // @ts-ignore\n    return item.cloneNode(true)\n  }\n\n  const type = Object.prototype.toString.call(item)\n\n  // Date\n  if (isDate(item)) {\n    // @ts-ignore\n    return new Date(item.getTime())\n  }\n\n  let i: number, j: number, k\n\n  // Array\n  if (Array.isArray(item)) {\n    i = item.length\n    let newClone: Record<number, any> = []\n\n    while (i--) {\n      newClone[i] = clone<any>(item[i], cloneDom)\n    }\n\n    return <T>newClone\n  }\n\n  // Object\n  if (type === '[object Object]' && (<Object>item).constructor === Object) {\n    let key: PropertyKey\n    let newClone: Record<PropertyKey, any> = {}\n\n    for (key in item) {\n      newClone[key] = clone<any>((<Record<PropertyKey, any>>item)[key], cloneDom)\n    }\n\n    if (enumerables) {\n      for (j = enumerables.length; j--; ) {\n        let k: string = enumerables[j]\n        if (Object.prototype.hasOwnProperty.call(item, k)) {\n          newClone[k] = (<Record<string, any>>item)[k]\n        }\n      }\n    }\n\n    return newClone\n  }\n\n  return item\n}\n"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,cAAnB;AAEA,MAAMC,WAAW,GAAG,CAAC,SAAD,EAAY,gBAAZ,EAA8B,UAA9B,EAA0C,aAA1C,CAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,KAAT,CAAqCC,IAArC,EAA8CC,QAAiB,GAAG,IAAlE,EAA2E;EACxF,IAAID,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAKE,SAA9B,EAAyC;IACvC,OAAOF,IAAP;EACD,CAHuF,CAKxF;;;EACA,IAAIC,QAAQ,IAAID,IAAI,CAACG,QAAjB,IAA6BH,IAAI,CAACI,SAAtC,EAAiD;IAC/C;IACA,OAAOJ,IAAI,CAACI,SAAL,CAAe,IAAf,CAAP;EACD;;EAED,MAAMC,IAAI,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BT,IAA/B,CAAb,CAXwF,CAaxF;;EACA,IAAIH,MAAM,CAACG,IAAD,CAAV,EAAkB;IAChB;IACA,OAAO,IAAIU,IAAJ,CAASV,IAAI,CAACW,OAAL,EAAT,CAAP;EACD;;EAED,IAAIC,CAAJ,EAAeC,CAAf,EAA0BC,CAA1B,CAnBwF,CAqBxF;;EACA,IAAIC,KAAK,CAACC,OAAN,CAAchB,IAAd,CAAJ,EAAyB;IACvBY,CAAC,GAAGZ,IAAI,CAACiB,MAAT;IACA,IAAIC,QAA6B,GAAG,EAApC;;IAEA,OAAON,CAAC,EAAR,EAAY;MACVM,QAAQ,CAACN,CAAD,CAAR,GAAcb,KAAK,CAAMC,IAAI,CAACY,CAAD,CAAV,EAAeX,QAAf,CAAnB;IACD;;IAED,OAAUiB,QAAV;EACD,CA/BuF,CAiCxF;;;EACA,IAAIb,IAAI,KAAK,iBAAT,IAAuCL,IAAT,CAAemB,WAAf,KAA+Bb,MAAjE,EAAyE;IACvE,IAAIc,GAAJ;IACA,IAAIF,QAAkC,GAAG,EAAzC;;IAEA,KAAKE,GAAL,IAAYpB,IAAZ,EAAkB;MAChBkB,QAAQ,CAACE,GAAD,CAAR,GAAgBrB,KAAK,CAAiCC,IAA3B,CAAiCoB,GAAjC,CAAN,EAA6CnB,QAA7C,CAArB;IACD;;IAED,IAAIH,WAAJ,EAAiB;MACf,KAAKe,CAAC,GAAGf,WAAW,CAACmB,MAArB,EAA6BJ,CAAC,EAA9B,GAAoC;QAClC,IAAIC,CAAS,GAAGhB,WAAW,CAACe,CAAD,CAA3B;;QACA,IAAIP,MAAM,CAACC,SAAP,CAAiBc,cAAjB,CAAgCZ,IAAhC,CAAqCT,IAArC,EAA2Cc,CAA3C,CAAJ,EAAmD;UACjDI,QAAQ,CAACJ,CAAD,CAAR,GAAoCd,IAAtB,CAA4Bc,CAA5B,CAAd;QACD;MACF;IACF;;IAED,OAAOI,QAAP;EACD;;EAED,OAAOlB,IAAP;AACD"}
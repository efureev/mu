{"version":3,"file":"toQueryString.js","names":["isBoolean","isDate","isEmpty","toQueryObjects","dateToString","toNumber","toQueryString","object","recursive","options","encodeName","parameterObjects","i","j","ln","parameterObject","value","Object","prototype","hasOwnProperty","call","concat","parameters","length","name","encodeURIComponent","push","String","join"],"sources":["../../../src/object/toQueryString.ts"],"sourcesContent":["import { isBoolean, isDate, isEmpty } from '../is'\n\nimport toQueryObjects from './toQueryObjects'\nimport { dateToString } from '../date'\nimport toNumber from '../to/toNumber'\n\ntype ToQueryStringOptions = {\n  encodeName: boolean\n}\n\n/**\n * Takes an object and converts it to an encoded query string.\n *\n * Non-recursive:\n *\n *     toQueryString({foo: 1, bar: 2}); // returns \"foo=1&bar=2\"\n *     toQueryString({foo: null, bar: 2}); // returns \"foo=&bar=2\"\n *     toQueryString({'some price': '$300'}); // returns \"some%20price=%24300\"\n *     toQueryString({date: new Date(2011, 0, 1)}); // returns \"date=%222011-01-01T00%3A00%3A00%22\"\n *     toQueryString({colors: ['red', 'green', 'blue']}); // returns \"colors=red&colors=green&colors=blue\"\n *\n * Recursive:\n *\n *     toQueryString({\n *         username: 'Jacky',\n *         dateOfBirth: {\n *             day: 1,\n *             month: 2,\n *             year: 1911,\n *         },\n *         hobbies: ['coding', 'eating', 'sleeping', ['nested', 'stuff']]\n *     }, true); // returns the following string (broken down and url-decoded for ease of reading purpose):\n *     // username=Jacky\n *     //    &dateOfBirth[day]=1&dateOfBirth[month]=2&dateOfBirth[year]=1911\n *     //    &hobbies[0]=coding&hobbies[1]=eating&hobbies[2]=sleeping&hobbies[3][0]=nested&hobbies[3][1]=stuff\n *\n * @param {Object} object The object to encode\n * @param {Boolean} [recursive=false] Whether or not to interpret the object in recursive format.\n * @param {Object} options = {\n *   - encodeName {Boolean} Encode each KeyName in the object\n * }\n * (PHP / Ruby on Rails servers and similar).\n * @return {String} queryString\n */\nexport default function toQueryString(\n  object: Record<string, any>,\n  recursive: boolean = false,\n  options: ToQueryStringOptions = { encodeName: true }\n) {\n  let parameterObjects: Record<string, any>[] = []\n  let i, j, ln, parameterObject, value\n\n  for (i in object) {\n    if (Object.prototype.hasOwnProperty.call(object, i)) {\n      parameterObjects = parameterObjects.concat(toQueryObjects(i, object[i], recursive))\n    }\n  }\n\n  const parameters = []\n\n  for (j = 0, ln = parameterObjects.length; j < ln; j++) {\n    parameterObject = parameterObjects[j]\n    value = parameterObject.value\n\n    if (isBoolean(value)) {\n      value = toNumber(value)\n    } else if (isEmpty(value)) {\n      value = ''\n    } else if (isDate(value)) {\n      value = dateToString(value)\n    }\n\n    const name = options.encodeName ? encodeURIComponent(parameterObject.name) : parameterObject.name\n    parameters.push(name + '=' + encodeURIComponent(String(value)))\n  }\n\n  return parameters.join('&')\n}\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,OAA5B,QAA2C,OAA3C;AAEA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAOC,QAAP,MAAqB,gBAArB;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,aAAT,CACbC,MADa,EAEbC,SAAkB,GAAG,KAFR,EAGbC,OAA6B,GAAG;EAAEC,UAAU,EAAE;AAAd,CAHnB,EAIb;EACA,IAAIC,gBAAuC,GAAG,EAA9C;EACA,IAAIC,CAAJ,EAAOC,CAAP,EAAUC,EAAV,EAAcC,eAAd,EAA+BC,KAA/B;;EAEA,KAAKJ,CAAL,IAAUL,MAAV,EAAkB;IAChB,IAAIU,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCb,MAArC,EAA6CK,CAA7C,CAAJ,EAAqD;MACnDD,gBAAgB,GAAGA,gBAAgB,CAACU,MAAjB,CAAwBlB,cAAc,CAACS,CAAD,EAAIL,MAAM,CAACK,CAAD,CAAV,EAAeJ,SAAf,CAAtC,CAAnB;IACD;EACF;;EAED,MAAMc,UAAU,GAAG,EAAnB;;EAEA,KAAKT,CAAC,GAAG,CAAJ,EAAOC,EAAE,GAAGH,gBAAgB,CAACY,MAAlC,EAA0CV,CAAC,GAAGC,EAA9C,EAAkDD,CAAC,EAAnD,EAAuD;IACrDE,eAAe,GAAGJ,gBAAgB,CAACE,CAAD,CAAlC;IACAG,KAAK,GAAGD,eAAe,CAACC,KAAxB;;IAEA,IAAIhB,SAAS,CAACgB,KAAD,CAAb,EAAsB;MACpBA,KAAK,GAAGX,QAAQ,CAACW,KAAD,CAAhB;IACD,CAFD,MAEO,IAAId,OAAO,CAACc,KAAD,CAAX,EAAoB;MACzBA,KAAK,GAAG,EAAR;IACD,CAFM,MAEA,IAAIf,MAAM,CAACe,KAAD,CAAV,EAAmB;MACxBA,KAAK,GAAGZ,YAAY,CAACY,KAAD,CAApB;IACD;;IAED,MAAMQ,IAAI,GAAGf,OAAO,CAACC,UAAR,GAAqBe,kBAAkB,CAACV,eAAe,CAACS,IAAjB,CAAvC,GAAgET,eAAe,CAACS,IAA7F;IACAF,UAAU,CAACI,IAAX,CAAgBF,IAAI,GAAG,GAAP,GAAaC,kBAAkB,CAACE,MAAM,CAACX,KAAD,CAAP,CAA/C;EACD;;EAED,OAAOM,UAAU,CAACM,IAAX,CAAgB,GAAhB,CAAP;AACD"}
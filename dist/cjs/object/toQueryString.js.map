{"version":3,"file":"toQueryString.js","names":["toQueryString","object","recursive","options","encodeName","parameterObjects","i","j","ln","parameterObject","value","Object","prototype","hasOwnProperty","call","concat","toQueryObjects","parameters","length","isBoolean","booleanToNumber","isEmpty","isDate","dateToString","name","encodeURIComponent","push","String","join"],"sources":["../../../src/object/toQueryString.ts"],"sourcesContent":["import isBoolean from '../is/isBoolean'\nimport isDate from '../is/isDate'\nimport isEmpty from '../is/isEmpty'\nimport toQueryObjects from './toQueryObjects'\nimport dateToString from '../date/toString'\nimport { booleanToNumber } from '../to/toNumber'\n\ntype ToQueryStringOptions = {\n  encodeName: boolean\n}\n\n/**\n * Takes an object and converts it to an encoded query string.\n *\n * Non-recursive:\n *\n *     toQueryString({foo: 1, bar: 2}); // returns \"foo=1&bar=2\"\n *     toQueryString({foo: null, bar: 2}); // returns \"foo=&bar=2\"\n *     toQueryString({'some price': '$300'}); // returns \"some%20price=%24300\"\n *     toQueryString({date: new Date(2011, 0, 1)}); // returns \"date=%222011-01-01T00%3A00%3A00%22\"\n *     toQueryString({colors: ['red', 'green', 'blue']}); // returns \"colors=red&colors=green&colors=blue\"\n *\n * Recursive:\n *\n *     toQueryString({\n *         username: 'Jacky',\n *         dateOfBirth: {\n *             day: 1,\n *             month: 2,\n *             year: 1911,\n *         },\n *         hobbies: ['coding', 'eating', 'sleeping', ['nested', 'stuff']]\n *     }, true); // returns the following string (broken down and url-decoded for ease of reading purpose):\n *     // username=Jacky\n *     //    &dateOfBirth[day]=1&dateOfBirth[month]=2&dateOfBirth[year]=1911\n *     //    &hobbies[0]=coding&hobbies[1]=eating&hobbies[2]=sleeping&hobbies[3][0]=nested&hobbies[3][1]=stuff\n *\n * @param {Object} object The object to encode\n * @param {Boolean} [recursive=false] Whether or not to interpret the object in recursive format.\n * @param {Object} options = {\n *   - encodeName {Boolean} Encode each KeyName in the object\n * }\n * (PHP / Ruby on Rails servers and similar).\n * @return {String} queryString\n */\nexport default function toQueryString(\n  object: Record<string, any>,\n  recursive: boolean = false,\n  options: ToQueryStringOptions = { encodeName: true }\n) {\n  let parameterObjects: Record<string, any>[] = []\n  let i, j, ln, parameterObject, value\n\n  for (i in object) {\n    if (Object.prototype.hasOwnProperty.call(object, i)) {\n      parameterObjects = parameterObjects.concat(toQueryObjects(i, object[i], recursive))\n    }\n  }\n\n  const parameters = []\n\n  for (j = 0, ln = parameterObjects.length; j < ln; j++) {\n    parameterObject = parameterObjects[j]\n    value = parameterObject.value\n\n    if (isBoolean(value)) {\n      value = booleanToNumber(value)\n    } else if (isEmpty(value)) {\n      value = ''\n    } else if (isDate(value)) {\n      value = dateToString(value)\n    }\n\n    const name = options.encodeName ? encodeURIComponent(parameterObject.name) : parameterObject.name\n    parameters.push(name + '=' + encodeURIComponent(String(value)))\n  }\n\n  return parameters.join('&')\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,aAAT,CACbC,MADa,EAIb;EAAA,IAFAC,SAEA,uEAFqB,KAErB;EAAA,IADAC,OACA,uEADgC;IAAEC,UAAU,EAAE;EAAd,CAChC;EACA,IAAIC,gBAAuC,GAAG,EAA9C;EACA,IAAIC,CAAJ,EAAOC,CAAP,EAAUC,EAAV,EAAcC,eAAd,EAA+BC,KAA/B;;EAEA,KAAKJ,CAAL,IAAUL,MAAV,EAAkB;IAChB,IAAIU,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCb,MAArC,EAA6CK,CAA7C,CAAJ,EAAqD;MACnDD,gBAAgB,GAAGA,gBAAgB,CAACU,MAAjB,CAAwB,IAAAC,uBAAA,EAAeV,CAAf,EAAkBL,MAAM,CAACK,CAAD,CAAxB,EAA6BJ,SAA7B,CAAxB,CAAnB;IACD;EACF;;EAED,IAAMe,UAAU,GAAG,EAAnB;;EAEA,KAAKV,CAAC,GAAG,CAAJ,EAAOC,EAAE,GAAGH,gBAAgB,CAACa,MAAlC,EAA0CX,CAAC,GAAGC,EAA9C,EAAkDD,CAAC,EAAnD,EAAuD;IACrDE,eAAe,GAAGJ,gBAAgB,CAACE,CAAD,CAAlC;IACAG,KAAK,GAAGD,eAAe,CAACC,KAAxB;;IAEA,IAAI,IAAAS,kBAAA,EAAUT,KAAV,CAAJ,EAAsB;MACpBA,KAAK,GAAG,IAAAU,yBAAA,EAAgBV,KAAhB,CAAR;IACD,CAFD,MAEO,IAAI,IAAAW,gBAAA,EAAQX,KAAR,CAAJ,EAAoB;MACzBA,KAAK,GAAG,EAAR;IACD,CAFM,MAEA,IAAI,IAAAY,eAAA,EAAOZ,KAAP,CAAJ,EAAmB;MACxBA,KAAK,GAAG,IAAAa,iBAAA,EAAab,KAAb,CAAR;IACD;;IAED,IAAMc,IAAI,GAAGrB,OAAO,CAACC,UAAR,GAAqBqB,kBAAkB,CAAChB,eAAe,CAACe,IAAjB,CAAvC,GAAgEf,eAAe,CAACe,IAA7F;IACAP,UAAU,CAACS,IAAX,CAAgBF,IAAI,GAAG,GAAP,GAAaC,kBAAkB,CAACE,MAAM,CAACjB,KAAD,CAAP,CAA/C;EACD;;EAED,OAAOO,UAAU,CAACW,IAAX,CAAgB,GAAhB,CAAP;AACD"}
{"version":3,"file":"equals.js","names":["equal","origin","i","l","leftChain","rightChain","list","isObject","length","Error","compare2Objects","x","y","p","isNaN","Date","RegExp","String","Number","toString","Object","prototype","isPrototypeOf","call","constructor","includes","push","pop"],"sources":["../../../src/object/equals.ts"],"sourcesContent":["/**\n * Compares the contents of 2 or more objects using strict equality.\n */\nimport { isObject } from '../is'\n\nexport default function equal(origin: Record<PropertyKey, any>, ...list: Record<PropertyKey, any>[]): boolean {\n  let i: number, l: number, leftChain: Array<any>, rightChain: Array<any>\n\n  if (!isObject(origin) || list.length === 0) {\n    throw new Error('Need two or more arguments to compare')\n  }\n\n  function compare2Objects(x: any, y: any) {\n    let p\n\n    // remember that NaN === NaN returns false\n    // and isNaN(undefined) returns true\n    // isNumeric(x,y)\n    if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n      return true\n    }\n\n    // Compare primitives and functions.\n    // Check if both arguments link to the same object.\n    // Especially useful on the step where we compare prototypes\n    if (x === y) {\n      return true\n    }\n\n    // Works in case when functions are created in constructor.\n    // Comparing dates is a common scenario. Another built-ins?\n    // We can even handle functions passed across iframes\n    if (\n      (typeof x === 'function' && typeof y === 'function') ||\n      (x instanceof Date && y instanceof Date) ||\n      (x instanceof RegExp && y instanceof RegExp) ||\n      (x instanceof String && y instanceof String) ||\n      (x instanceof Number && y instanceof Number)\n    ) {\n      return x.toString() === y.toString()\n    }\n\n    // At last checking prototypes as good as we can\n    if (!(x instanceof Object && y instanceof Object)) {\n      return false\n    }\n\n    if (Object.prototype.isPrototypeOf.call(x, y) || Object.prototype.isPrototypeOf.call(y, x)) {\n      return false\n    }\n\n    if (x.constructor !== y.constructor) {\n      return false\n    }\n\n    if (x.prototype !== y.prototype) {\n      return false\n    }\n\n    // Check for infinitive linking loops\n    if (leftChain.includes(x) || rightChain.includes(y)) {\n      return false\n    }\n\n    // Quick checking of one object being a subset of another.\n    // todo: cache the structure of arguments[0] for performance\n    for (p in y) {\n      if (Object.prototype.isPrototypeOf.call(y, p) !== Object.prototype.isPrototypeOf.call(x, p)) {\n        return false\n      } else if (typeof y[p] !== typeof x[p]) {\n        return false\n      }\n    }\n\n    for (p in x) {\n      if (Object.prototype.isPrototypeOf.call(y, p) !== Object.prototype.isPrototypeOf.call(x, p)) {\n        return false\n      } else if (typeof y[p] !== typeof x[p]) {\n        return false\n      }\n\n      switch (typeof x[p]) {\n        case 'object':\n        case 'function':\n          leftChain.push(x)\n          rightChain.push(y)\n\n          if (!compare2Objects(x[p], y[p])) {\n            return false\n          }\n\n          leftChain.pop()\n          rightChain.pop()\n          break\n\n        default:\n          if (x[p] !== y[p]) {\n            return false\n          }\n          break\n      }\n    }\n\n    return true\n  }\n\n  for (i = 0, l = list.length; i < l; i++) {\n    leftChain = [] // @Todo: this can be cached\n    rightChain = []\n\n    if (!compare2Objects(origin, list[i])) {\n      return false\n    }\n  }\n\n  return true\n}\n"],"mappings":"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"}
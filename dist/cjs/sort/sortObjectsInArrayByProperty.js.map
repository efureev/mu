{"version":3,"file":"sortObjectsInArrayByProperty.js","names":["sortObjectsInArrayByProperty","obj","property","asc","ignoreCase","isString","Error","isArray","sort","sortByProperty","isObject","includes","cloneObj","clone","keys","split","sortKey","pop","aPath","join","a","select","aSorted","pathToObject","sortDescObjectsInArrayByProperty"],"sources":["../../../src/sort/sortObjectsInArrayByProperty.ts"],"sourcesContent":["import sortByProperty from './sortByProperty'\nimport { isArray, isObject, isString } from '../is'\nimport select from '../object/select'\nimport clone from '../core/clone'\nimport pathToObject from '../object/pathToObject'\n\n/**\n * Sort object-like items into array\n *\n * @param {object|array} obj\n * @param {string} property\n * @param {boolean} asc\n * @param {boolean} ignoreCase\n * @return {(function(*, *): number)|*}\n *\n * @example 1 array-sorting with digit keys\n *  const items = [\n *       { id: 2, title: '...', pId: 62 },\n *       { id: 1, title: '...', pId: 43 }\n *  ]\n *  sortObjectsInArrayByProperty(items, `id`)\n *  sortObjectsInArrayByProperty(items, `pId`, false) // is equal `sortDescObjectsInArrayByProperty(items, `pId`)`\n *  sortObjectsInArrayByProperty(items, `pId`, false, false) is equal `sortDescObjectsInArrayByProperty(items, `pId`, false)`\n *\n * @example 2: array-sorting with string keys\n *  const items = [\n *      { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Mo/symbols.git' },\n *      { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Zoo.git' },\n *  ]\n *  sortObjectsInArrayByProperty(items, `url`)\n *\n * @example 3: object-like-sorting with string keys\n *  const items = {\n *    name: 'list',\n *    sub1: {\n *       sub2: {\n *        sub3: {\n *          repositories: [\n *            { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Mo/symbols.git' },\n *            { type: 'vcs', url: 'ssh://git@example.com:2225/modules/Zoo.git' },\n *          ]\n *        }\n *      }\n *    }\n *  };\n *\n *  sortObjectsInArrayByProperty(items, `sub1.sub2.sub3.repositories.url`)\n *\n */\nexport default function sortObjectsInArrayByProperty(\n  obj: Record<PropertyKey, any>,\n  property: string,\n  asc: boolean = true,\n  ignoreCase: boolean = true\n): Record<PropertyKey, any> {\n  if (!isString(property)) {\n    throw new Error(`key should be a String`)\n  }\n\n  if (isArray(obj)) {\n    return obj.sort(sortByProperty(property, asc, ignoreCase))\n  }\n\n  if (!isObject(obj)) {\n    throw new Error(`obj should be an Object or an Array`)\n  }\n\n  if (!property.includes('.')) {\n    throw new Error(`key's path should divided by dot (.): key1.inner-key.localKey`)\n  }\n\n  const cloneObj = clone(obj)\n\n  const keys: string[] = property.split(`.`)\n  const sortKey = keys.pop()\n  if (!sortKey) {\n    throw new Error(`Not found a key`)\n  }\n\n  const aPath = keys.join(`.`)\n  const a = select(cloneObj, aPath)\n\n  const aSorted = sortObjectsInArrayByProperty(a, sortKey, asc, ignoreCase)\n\n  return pathToObject(aPath, aSorted, cloneObj)\n}\n\nexport function sortDescObjectsInArrayByProperty(\n  obj: Record<PropertyKey, any>,\n  property: string,\n  ignoreCase: boolean = true\n) {\n  return sortObjectsInArrayByProperty(obj, property, false, ignoreCase)\n}\n"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,4BAAT,CACbC,GADa,EAEbC,QAFa,EAKa;EAAA,IAF1BC,GAE0B,uEAFX,IAEW;EAAA,IAD1BC,UAC0B,uEADJ,IACI;;EAC1B,IAAI,CAAC,IAAAC,YAAA,EAASH,QAAT,CAAL,EAAyB;IACvB,MAAM,IAAII,KAAJ,0BAAN;EACD;;EAED,IAAI,IAAAC,WAAA,EAAQN,GAAR,CAAJ,EAAkB;IAChB,OAAOA,GAAG,CAACO,IAAJ,CAAS,IAAAC,uBAAA,EAAeP,QAAf,EAAyBC,GAAzB,EAA8BC,UAA9B,CAAT,CAAP;EACD;;EAED,IAAI,CAAC,IAAAM,YAAA,EAAST,GAAT,CAAL,EAAoB;IAClB,MAAM,IAAIK,KAAJ,uCAAN;EACD;;EAED,IAAI,CAACJ,QAAQ,CAACS,QAAT,CAAkB,GAAlB,CAAL,EAA6B;IAC3B,MAAM,IAAIL,KAAJ,iEAAN;EACD;;EAED,IAAMM,QAAQ,GAAG,IAAAC,cAAA,EAAMZ,GAAN,CAAjB;EAEA,IAAMa,IAAc,GAAGZ,QAAQ,CAACa,KAAT,KAAvB;EACA,IAAMC,OAAO,GAAGF,IAAI,CAACG,GAAL,EAAhB;;EACA,IAAI,CAACD,OAAL,EAAc;IACZ,MAAM,IAAIV,KAAJ,mBAAN;EACD;;EAED,IAAMY,KAAK,GAAGJ,IAAI,CAACK,IAAL,KAAd;EACA,IAAMC,CAAC,GAAG,IAAAC,eAAA,EAAOT,QAAP,EAAiBM,KAAjB,CAAV;EAEA,IAAMI,OAAO,GAAGtB,4BAA4B,CAACoB,CAAD,EAAIJ,OAAJ,EAAab,GAAb,EAAkBC,UAAlB,CAA5C;EAEA,OAAO,IAAAmB,qBAAA,EAAaL,KAAb,EAAoBI,OAApB,EAA6BV,QAA7B,CAAP;AACD;;AAEM,SAASY,gCAAT,CACLvB,GADK,EAELC,QAFK,EAIL;EAAA,IADAE,UACA,uEADsB,IACtB;EACA,OAAOJ,4BAA4B,CAACC,GAAD,EAAMC,QAAN,EAAgB,KAAhB,EAAuBE,UAAvB,CAAnC;AACD"}